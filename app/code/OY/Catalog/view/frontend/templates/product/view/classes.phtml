<?php
// @codingStandardsIgnoreFile

/**
 * @var $block \Magento\Catalog\Block\Product\View
 */
$oyHelper         = $this->helper('OY\Catalog\Helper\Data');
?>
<?php
$_product = $block->getProduct();
?>
<?php if ($oyHelper->getCountClass($_product->getId())): ?>
 <div class="cl_count-classes">
    <div class="product-classes-list" role="tablist">
        <div class="collapsible"><?=$oyHelper->getCountClass($_product->getId()).' Clases';?></div>
        <div class="content">
            <?php
            if($oyHelper->getCountClass($_product->getId())) {
            foreach ($oyHelper->getListClassesId($_product->getId()) as $item){
                $itemObj = $oyHelper->getClass($item);
            ?>
                <div class="class-item">
                    <?php if($itemObj->getData('image')) { ?>
                        <div class="image-container">
                            <img width="150" height="150" src="<?=$itemObj->getData('image')?>">
                        </div>
                    <?php
                    }
                    ?>
                    <div>
                        <strong>Nombre:</strong> <?=$itemObj->getData('name') ?><br/>
                        <strong>Profesor:</strong> <?=$itemObj->getData('profesor_name') ?><br/>
                        <?=$itemObj->getData('description') ?>
                    </div>
                </div>
            <?php
            }}
            ?>
        </div>
    </div>

    <script>
        require(['jquery'], function ($) {
            $(function() {
                $( ".collapsible" ).click(function() {
                    $( ".collapsible" ).toggleClass( "active" );
                    $( ".content" ).toggle();
                });
            });
        });
    </script>
</div>
<?php endif ?>
